From 848912ad5c7f0608c555eb5c4dd8b250d136040e Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Zolt=C3=A1n=20B=C3=B6sz=C3=B6rm=C3=A9nyi?=
 <zboszor@gmail.com>
Date: Mon, 24 Nov 2025 15:02:12 +0100
Subject: [PATCH] Make the PHP binding PHP 8.5 compatible
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

Signed-off-by: Zoltán Böszörményi <zboszor@gmail.com>
Upstream-Status: Backport
---
 bindings/php/config.m4 | 7 +------
 1 file changed, 1 insertion(+), 6 deletions(-)

diff --git a/bindings/php/config.m4 b/bindings/php/config.m4
index f84d020..014d7a2 100644
--- a/bindings/php/config.m4
+++ b/bindings/php/config.m4
@@ -22,12 +22,7 @@ if test "$PHP_OPENCREPORTS" != "no"; then
 	AC_MSG_RESULT(found)
 
 	AC_MSG_CHECKING([whether opencreports is available])
-
-	PHP_TEST_BUILD(ocrpt_init,
-		[AC_MSG_RESULT([yes])],
-		[AC_MSG_RESULT([no])
-		 AC_MSG_ERROR([build test failed.  Please check the config.log for details.])],
-		[-lopencreport])
+	AC_CHECK_LIB(opencreport, ocrpt_init, [AC_MSG_RESULT([yes])], [AC_MSG_RESULT([no])])
 
 	AC_MSG_CHECKING(for opencreports via pkgconfig)
 	if $PKG_CONFIG --exists opencreports; then
-- 
2.52.0

